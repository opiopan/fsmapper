---
sidebar_position: 10
---

# Event Modifier Specification
This section details the specifications of each [**Event Modifier**](/guide/device/#event-modifier) in the following items.
- Modifier name:<br/>
    The string as `modtype` parameter in the [**event modifier definition**](/libs/mapper/mapper_device#event-modifier-definition) when defining modifiers in [`mapper.device()`](/libs/mapper/mapper_device).
- The events generated by default
- Options specific to the modifier:<br/>
    The structure of a table specified as `modparam` parameter in the [**event modifier definition**](/libs/mapper/mapper_device#event-modifier-definition) when defining modifiers in [`mapper.device()`](/libs/mapper/mapper_device).

------
## raw Modifier
This is the default modifier that doesn't make any changes to the event.

### Name (modtype)
`raw`

### Default Events
|Event|Description|
|-----|-----------|
|`change`|This event is triggered every time the value of the [**Device Unit**](/guide/device/#device-unit) changes.The [**Event Value**](/guide/event-action-mapping#event) is directly set as the value of the Device Unit.

### Options (modparam)
There are currently no `modparam` available for the `raw` modifiers.

------
## button Modifier
This modifier is intended for application to [**Device Unit**](/guide/device/#device-unit)s that can be represented by binary values, such as buttons. 
This modifier can also be employed to enable binary functionality for [**Device Unit**](/guide/device/#device-unit) that inherently possess continuous quantities like analog axes.

### Name (modtype)
`button`

### Default Events
|Event|Description|
|-----|-----------|
|`down`|This event is triggered when the Device Unit value changes from OFF to ON. By default, 0 is considered OFF, and 1 is considered ON.
|`up`|This event is triggered when the Device Unit value changes from ON to OFF. By default, 0 is considered OFF, and 1 is considered ON.


### Options (modparam)
|Key|Type|Description|
|---|----|-----------|
|`polarity`|string|When `negative` is specified, it interprets ON/OFF inversely; the default is `positive`.
|`max_threshold`|number|Specify this when treating a [**Device Unit**](/guide/device/#device-unit) with continuous values like a binary button.<br/>Interpreted as ON when the specified value is exceeded.
|`min_threshold`|number|Specify this when treating a [**Device Unit**](/guide/device/#device-unit) with continuous values like a binary button.<br/>Interpreted as OFF when the specified value is undercut.
|`longpress`|number|Specify the value in milliseconds, it triggers a `longpressed` event when the button is held down for the specified duration
|`doubleclick`|number|Specify the value in milliseconds.<br/>If double-clicked within the specified time, the `doubleclicked` event is triggered. If there's no second click within the specified time after the initial click, the `singleclicked` event is triggered.
|`click_timing`|string| Specify the timing for determining clicks as `up` or `down`.<br/>The default is `down`.
|`repeat_interval`|number|Specify the value in milliseconds. It triggers a `down` events repeatedly at specified time intervals while the button is held down.
|`repeat_delay`|number|Specify the time, in milliseconds, before the repeat operation begins after pressing the button. This setting is effective only when `repeat_interval` is specified.<br/>The default is `0`.
|`follow_down`|number|Specify the value in milliseconds. It trigers a `follow_down` event once the specified time has passed since the occurrence of a `down` event.
|`follow_up`|number|Specify the value in milliseconds. It trigers a `follow_up` event once the specified time has passed since the occurrence of a `up` event.

------
## incdec Modifier
This modifier is intended for application to [**Device Unit**](/guide/device/#device-unit)s that operate on relative values.

### Name (modtype)
`incdec`

### Default Events
|Event|Description|
|-----|-----------|
|`increment`|This event is triggerd when change is positive. The [**Event Value**](/guide/event-action-mapping#event) represents the absolute value of the [**Device Unit**](/guide/device/#device-unit).
|`decrement`|This event is triggerd when change is negative. The [**Event Value**](/guide/event-action-mapping#event) represents the absolute value of the [**Device Unit**](/guide/device/#device-unit).

### Options (modparam)
|Key|Type|Description|
|---|----|-----------|
|`pulse_mode`|boolean|When `true` is specified, it operates in **pulse mode**. The default is `false`.<br/>**Pulse mode** generates two events, corresponding to push and release, like a button, based on the number of times the change amount is set in the `increment` or `decrement` event values.<br/>Instead of the `increment` event, it triggers the `increment_pulse` event, and for the `decrement` event, it triggers the `decrement_pulse` event. The [**Event Value**](/guide/event-action-mapping#event) sets `1` for push simulation and `0` for release simulation.
|`pulse_duration`|number|When in pulse mode, specify the duration of the simulated press in milliseconds.<br/>The default is `30`.
|`pulse_interval`|number|When in pulse mode, specify the minimum time in milliseconds between the simulated release and the next simulated press.<br/>The default is `30`.
|`max_hold_num`|number|Specifies the maximum number of pulse generations to hold. Setting this value too high might lead to continued event generation long after the [**Device Unit**](/guide/device/#device-unit)'s change has stopped. Adjust this value based on the desired real-time responsiveness.<br/>The default is `4`.

------
## quantized_stick Modifier
This modifier is intended for application to [**Device Unit**](/guide/device/#device-unit)s that are self-centering and operate on relative values (e.g. joysticks and thumbsticks).  The modifier normalizes the stick's position into one of three values: negative, center or positive; it is 'quantized'.  The modifier will generate `positive` or `negative` events when the stick is pushed in either direction.  The events can repeat while the stick is held.

This modifier was written for Logitech Gamepad F710, to use its left & right thumbsticks to control FMS Knobs on PFD and MFD respectively.  The x/rx (horizontal) axis can be mapped to the inner knob, the y/ry (vertical) axis can be mapped to the outer knob, and clicking the thumbstick can push the inner knob.  The controller can be used in VR mode, in addition to yoke, pedals, keyboard and mouse, primarily for creating flight plans on the MFD.  The controller's remaining buttons are mapped in-game for AP, TO/GA, A/T and similar AFCS buttons.

Features can be added to generate an event when returned to center, and to provide negative activate/release thresholds independent of their positive counterparts.  

### Name (modtype)
`quantized_stick`

### Default Events
|Event|Description|
|-----|-----------|
|`positive`|This event is triggered when the stick is pushed right (x,rx) or down (y,ry) of neutral.
|`negative`|This event is triggered when the stick is pushed left (x,rx) or up (y,ry) of neutral.

### Options (modparam)
|Key|Type|Default|Description|
|---|----|-------|-----------|
|`repeat_mode`|boolean|`true`|When enabled, the events are repeated while the stick is held beyond the `activate_threshold`, until it crosses again below the `release_threshold`.
|`repeat_interval`|number|`500`|Specify the time delay, in milliseconds, before sending the event a second time.
|`repeat_delay`|number|`500`|Specify the time delay, in milliseconds, between all subsequent repeating events.
|`activate_threshold`|number|`30000`|The absolute value that must be exceeded before the stick is considered held.
|`release_threshold`|number|`20000`|The absolute value that must be reverted before the stick is considered centered and no longer held.

#### Sample script for two `quantized_stick`s as PFD/MFD FMS Knobs:
```lua
F710_device = mapper.device{
    name = 'F710',
    type = 'dinput',
    identifier = {name = 'Controller (Wireless Gamepad F710)'},
    modifiers = {
        {name = 'button9',  modtype = 'button'},
        {name = 'button10', modtype = 'button'},
        {name = 'x',        modtype = 'quantized_stick', modparam = { repeat_interval = 100 } },
        {name = 'y',        modtype = 'quantized_stick', modparam = { repeat_interval = 100 } },
        {name = 'rx',       modtype = 'quantized_stick', modparam = { repeat_interval = 100 } },
        {name = 'ry',       modtype = 'quantized_stick', modparam = { repeat_interval = 100 } },
    }
}

local F710 = F710_device.events

mapper.set_primary_mappings {
    { event = F710.x.positive,    action = msfs.mfwasm.rpn_executer("(>H:AS1000_PFD_FMS_Upper_INC)")  },
    { event = F710.x.negative,    action = msfs.mfwasm.rpn_executer("(>H:AS1000_PFD_FMS_Upper_DEC)")  },
    { event = F710.y.positive,    action = msfs.mfwasm.rpn_executer("(>H:AS1000_PFD_FMS_Lower_INC)")  },
    { event = F710.y.negative,    action = msfs.mfwasm.rpn_executer("(>H:AS1000_PFD_FMS_Lower_DEC)")  },
    { event = F710.button9.down,  action = msfs.mfwasm.rpn_executer("(>H:AS1000_PFD_FMS_Upper_PUSH)") },
    { event = F710.rx.positive,   action = msfs.mfwasm.rpn_executer("(>H:AS1000_MFD_FMS_Upper_INC)")  },
    { event = F710.rx.negative,   action = msfs.mfwasm.rpn_executer("(>H:AS1000_MFD_FMS_Upper_DEC)")  },
    { event = F710.ry.positive,   action = msfs.mfwasm.rpn_executer("(>H:AS1000_MFD_FMS_Lower_INC)")  },
    { event = F710.ry.negative,   action = msfs.mfwasm.rpn_executer("(>H:AS1000_MFD_FMS_Lower_DEC)")  },
    { event = F710.button10.down, action = msfs.mfwasm.rpn_executer("(>H:AS1000_MFD_FMS_Upper_PUSH)") },
}
```
------
